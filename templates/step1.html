<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Vista previa para redes sociales -->
  <meta property="og:title" content="Crea tu p√°gina personalizada">
  <meta property="og:description" content="Arm√° tu sitio web visualmente, sin c√≥digo. Eleg√≠ estilo, carg√° productos y descargalo listo.">
  <meta property="og:image" content="https://appweb-t6jr.onrender.com/static/img/preview.jpg">
  <meta property="og:url" content="https://appweb-t6jr.onrender.com">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">

  <meta charset="UTF-8">
  <title>Tipo de sitio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Playfair+Display&family=Fira+Code&family=Raleway&family=Quicksand&family=Pacifico&family=Source+Serif+4&display=swap" rel="stylesheet">

<style>
body { background-color: #000; font-family: sans-serif; color: white; }

h2 { color: white; }

.icono { height: 20px; width: auto; object-fit: contain; margin-right: 6px; vertical-align: middle; }

.card { background-color: rgba(255, 255, 255, 0.05); color: white; border: none; border-radius: 12px; }

.form-control { background-color: rgba(255, 255, 255, 0.05); color: white; border: none; border-radius: 8px; }

.form-control::placeholder { color: #aaa; }

.btn-gradient { background: linear-gradient(135deg, #8e2de2, #ff6f61); color: white; border: none; padding: 10px 24px; border-radius: 50px; font-weight: bold; box-shadow: 0 0 10px rgba(255,255,255,0.3); transition: transform 0.2s ease, box-shadow 0.2s ease; }

.btn-gradient:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(255,255,255,0.5); }

.fuente-opcion { display: inline-block; margin-right: 20px; margin-bottom: 10px; cursor: pointer; }

.fuente-opcion input[type="radio"] { margin-right: 6px; vertical-align: middle; }

/* üî• RESPONSIVO PARA M√ìVIL */
@media (max-width: 768px) {
  /* Paso 1 y Paso 2 en columna */
  #form-crear-admin,
  .container > div:has(#btn-repo) {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 12px !important;
  }

  /* Etiquetas "Paso X:" m√°s compactas */
  #form-crear-admin label,
  .container > div:has(#btn-repo) label {
    width: 100%;
    margin-bottom: 4px;
    font-size: 14px;
  }

  /* Inputs al 100% */
  #usuario_admin,
  #clave_admin,
  #email {
    width: 100% !important;
    padding: 10px;
    font-size: 16px; /* Para evitar zoom en iOS */
  }

  /* Botones m√°s anchos */
  .btn-gradient {
    width: 100%;
    text-align: center;
    padding: 12px;
    margin-top: 8px;
  }

  /* Fuentes en columna */
  .fuente-opcion {
    display: block;
    margin-right: 0;
    margin-bottom: 12px;
    padding: 8px;
    background: rgba(255,255,255,0.03);
    border-radius: 6px;
  }

  /* Mensajes inline en nueva l√≠nea */
  #msg-admin,
  #msg-repo {
    display: block;
    margin-left: 0 !important;
    margin-top: 8px;
    text-align: center;
  }

  /* Iconos m√°s grandes para t√°ctil */
  .icono {
    height: 24px;
  }

  /* Card padding reducido */
  .card {
    padding: 16px !important;
  }

  /* Ayuda de Facebook/Maps */
  #infoFacebook,
  #infoMapa {
    padding: 12px;
    background: rgba(255,255,255,0.05);
    border-radius: 8px;
    font-size: 13px;
  }

  /* Im√°genes de ayuda responsivas */
  #infoFacebook img,
  #infoMapa img {
    width: 100% !important;
    height: auto !important;
  }
}

/* Para pantallas muy peque√±as (iPhone SE, etc) */
@media (max-width: 360px) {
  .container {
    padding-left: 10px !important;
    padding-right: 10px !important;
  }
  
  h2 {
    font-size: 1.5rem;
  }
}  
  </style>
</head>
<body>
  <div class="container py-5">
    <h2 class="mb-4 text-center">Cre√° tu sitio tipo cat√°logo</h2>

<form id="form-crear-admin" onsubmit="crearAdmin(event)" class="form-pasos">
  <label for="usuario_admin" style="font-weight:bold;">Paso 1:</label>
  <input type="text" id="usuario_admin" required placeholder="Ingres√° tu email" style="width:180px;">
  
  <label for="clave_admin">Contrase√±a:</label>
  <input type="password" id="clave_admin" required style="width:120px;">
  
  <button type="submit" class="btn-gradient">Crear admin</button>
  <!-- ‚úÖ Mensaje inline -->
  <span id="msg-admin" style="margin-left:10px; font-weight:bold; color:#0f0;"></span>
</form>

<div class="form-pasos">
  <label for="email" style="font-weight:bold;">Paso 2:</label>
  <input type="email" id="email" required placeholder="Ingres√° tu email" style="width:180px;">
  
  <button id="btn-repo" onclick="crearRepositorio()" class="btn-gradient" disabled>
    Crear repositorio
  </button>
  <!-- ‚úÖ Mensaje inline -->
  <span id="msg-repo" style="margin-left:10px; font-weight:bold; color:#0f0;"></span>
</div>


    <form method="POST" enctype="multipart/form-data">
      <input type="hidden" name="tipo_web" value="cat√°logo">

      <div class="mb-4 card p-3">
        <label class="form-label text-white">Cuenta sobre ti, o tu emprendimiento/productos...</label>
        <textarea name="sobre_mi" class="form-control" rows="3" placeholder="Contanos qui√©n sos, qu√© hac√©s, o qu√© ofrece tu emprendimiento..."></textarea>
      </div>

      <div class="mb-4 card p-3">
        <label class="form-label text-white">Logo</label>
        <input type="file" name="logo" accept="image/*" class="form-control">
      </div>

      <div class="mb-4 card p-3">
        <label class="form-label text-white">Estilo de fuente</label>
        <div class="d-flex flex-wrap">
          <label class="fuente-opcion text-white" style="font-family: 'Roboto', sans-serif;">
            <input type="radio" name="fuente" value="'Roboto', sans-serif"> Roboto
          </label>
          <label class="fuente-opcion text-white" style="font-family: 'Playfair Display', serif;">
            <input type="radio" name="fuente" value="'Playfair Display', serif"> Playfair Display
          </label>
          <label class="fuente-opcion text-white" style="font-family: 'Fira Code', monospace;">
            <input type="radio" name="fuente" value="'Fira Code', monospace"> Fira Code
          </label>
          <label class="fuente-opcion text-white" style="font-family: 'Raleway', sans-serif;">
            <input type="radio" name="fuente" value="'Raleway', sans-serif"> Raleway
          </label>
          <label class="fuente-opcion text-white" style="font-family: 'Quicksand', sans-serif;">
            <input type="radio" name="fuente" value="'Quicksand', sans-serif"> Quicksand
          </label>
          <label class="fuente-opcion text-white" style="font-family: 'Pacifico', cursive;">
            <input type="radio" name="fuente" value="'Pacifico', cursive"> Pacifico
          </label>
          <label class="fuente-opcion text-white" style="font-family: 'Source Serif 4', serif;">
            <input type="radio" name="fuente" value="'Source Serif 4', serif"> Source Serif 4
          </label>
        </div>
      </div>

     <div class="card p-4 shadow-sm">
  <h5 class="mb-3 text-white">Agreg√° tus redes y links de contacto</h5>
  <div class="d-flex flex-column gap-3">

<div class="mb-3">
  <label class="form-label text-white d-flex align-items-center">
    <img src="/static/img/facebook.png" class="icono" alt="Facebook"> Facebook
    <!-- Bot√≥n de informaci√≥n -->
    <button type="button" class="btn btn-sm btn-info ms-2" onclick="toggleInfoFacebook()" style="padding: 2px 6px; font-size: 14px;">
      Ayuda
    </button>
  </label>

  <!-- Campo para el link -->
  <input type="url" name="facebook" class="form-control" placeholder="https://facebook.com/tu_pagina">

  <!-- Bloque de ayuda oculto -->
  <div id="infoFacebook" style="display: none; margin-top: 10px; font-size: 14px; color: #ccc;">
    <p><strong>C√≥mo obtener tu link de Facebook:</strong></p>

    <!-- Ayuda Web -->
    <p>üåê Desde la versi√≥n web:</p>
    <img src="/static/img/ejemplo-facebook-web.png" alt="Ejemplo Facebook Web" style="max-width: 100%; border-radius: 6px; margin-bottom: 10px;">

    <!-- Ayuda App -->
    <p>üì± Desde la app m√≥vil:</p>
    <img src="/static/img/ejemplo-facebook-app.png" 
     alt="Ejemplo Facebook App" 
     style="width: 390px; height: 100px; border-radius: 6px;">
  </div>
</div>
    <!-- Instagram -->
    <div class="mb-3">
      <label class="form-label text-white">
        <img src="/static/img/instagram.png" class="icono" alt="Instagram"> Instagram
      </label>
      <input type="url" name="instagram" class="form-control" placeholder="https://instagram.com/tu_usuario">
    </div>
    <!-- WhatsApp -->
    <div class="mb-3">
      <label class="form-label text-white">
        <img src="/static/img/whatsapp.png" class="icono" alt="WhatsApp"> WhatsApp (Despu√©s del 549 siga con su numero real sin espacios)
      </label>
      <input type="url" name="whatsapp" class="form-control" value="https://wa.me/549" placeholder="Ej: https://wa.me/5491123456789">
    </div>

      <div class="mb-3">
        <label for="ubicacion" class="form-label">Direcci√≥n (Escriba su direccion)</label>
        <input type="text" class="form-control" id="ubicacion" name="ubicacion" placeholder="Ej: Corrientes 9001, Buenos Aires">
      </div>

<div class="mb-3">
  <label for="link_mapa" class="form-label d-flex align-items-center">
    <span>(Opcional) Link de Google Maps</span>
    <button type="button" class="btn btn-sm btn-info ms-2" onclick="toggleInfoMapa()" style="padding: 2px 6px; font-size: 14px;">
      Ayuda
    </button>
  </label>

  <input type="url" class="form-control" id="link_mapa" name="link_mapa" placeholder="https://maps.app.goo.gl/...">

  <div id="infoMapa" style="display: none; margin-top: 6px; font-size: 14px; color: #ccc;">
    Si tu negocio est√° en Google Maps, al darle a -Compartir- te da un -Vinculo- desde la app o web y podes pegarlo ac√°.<br>
    <strong>Ejemplo:</strong> <code>https://maps.app.goo.gl/S5W57nqK3CA59CNsadp9</code><br>
    <img src="/static/img/ejemplo-maps.png" alt="Ejemplo de Google Maps" style="max-width: 100%; margin-top: 8px; border-radius: 6px;">
  </div>
</div>

      <div class="text-center mt-4">
        <button type="submit" class="btn-gradient">Continuar</button>
      </div>
    </form>
  </div>
<script>
function showMessage(containerId, msg, type = "danger") {
  const el = document.getElementById(containerId);
  if (!el) return;
  el.innerHTML = `<div class="alert alert-${type}" role="alert">${msg}</div>`;
}

// Usos equivalentes a tus funciones anteriores:
showMessage("alertas", "‚ö†Ô∏è Error gen√©rico", "danger");       // antes showError
showMessage("alertas", "‚úÖ Operaci√≥n correcta", "success");   // antes showInfo

showMessage("alertasAdmin", "‚ö†Ô∏è Error en admin", "danger");   // antes showErrorAdmin
showMessage("alertasAdmin", "‚úÖ Admin creado", "success");    // antes showInfoAdmin

showMessage("alertasRepo", "‚ö†Ô∏è Error en repo", "danger");     // antes showErrorRepo
showMessage("alertasRepo", "‚úÖ Repo creado", "success");      // antes showInfoRepo


function toggleInfoFacebook() {
  const info = document.getElementById('infoFacebook');
  info.style.display = info.style.display === 'none' ? 'block' : 'none';
}
function toggleInfoMapa() {
  const info = document.getElementById('infoMapa');
  info.style.display = info.style.display === 'none' ? 'block' : 'none';
}

async function crearRepositorio() {
  const email = document.getElementById("email").value.trim();
  const msgRepo = document.getElementById("msg-repo");
  const btnRepo = document.getElementById("btn-repo"); // tu bot√≥n Paso 2
  msgRepo.textContent = "";

  if (!email) {
    msgRepo.textContent = "‚ö†Ô∏è Ingres√° un email v√°lido.";
    msgRepo.style.color = "#f00";
    return;
  }

  try {
    if (btnRepo) btnRepo.disabled = true; // ‚è≥ bloquear mientras se procesa

    const res = await fetch("/crear-repo", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email })
    });

    const data = await res.json();
    if (data.url) {
      msgRepo.textContent = "‚úÖ Creado correctamente";
      msgRepo.style.color = "#0f0";
    } else {
      msgRepo.textContent = "‚ùå Error: " + (data.error || "No se pudo crear el repositorio.");
      msgRepo.style.color = "#f00";
    }
  } catch (err) {
    console.error("‚ùå Error en fetch:", err);
    msgRepo.textContent = "‚ùå Error al crear repositorio.";
    msgRepo.style.color = "#f00";
  } finally {
    if (btnRepo) btnRepo.disabled = false; // üîì volver a habilitar
  }
}


function crearAdmin(event) {
  event.preventDefault();
  const usuario = document.getElementById("usuario_admin").value.trim();
  const clave = document.getElementById("clave_admin").value.trim();
  const msgAdmin = document.getElementById("msg-admin");
  const btnAdmin = event.target.querySelector('button[type="submit"]'); // bot√≥n del form
  msgAdmin.textContent = ""; // limpiar antes

  if (!usuario || !clave) {
    msgAdmin.textContent = "‚ö†Ô∏è Faltan datos para crear el admin.";
    msgAdmin.style.color = "#f00";
    return;
  }

  // ‚è≥ bloquear bot√≥n mientras se procesa
  if (btnAdmin) btnAdmin.disabled = true;

  fetch("/crear-admin", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ usuario, clave })
  })
    .then(res => res.json())
    .then(data => {
      if (data.status === "ok") {
        msgAdmin.textContent = "‚úÖ Creado correctamente";
        msgAdmin.style.color = "#0f0";

        // üëâ habilitar bot√≥n de Paso 2
        const btnRepo = document.getElementById("btn-repo");
        if (btnRepo) {
          btnRepo.disabled = false;
        }
      } else {
        msgAdmin.textContent = "‚ùå Error: " + (data.message || "No se pudo crear el admin.");
        msgAdmin.style.color = "#f00";
      }
    })
    .catch(err => {
      console.error("‚ùå Error en fetch:", err);
      msgAdmin.textContent = "‚ùå Error al crear admin.";
      msgAdmin.style.color = "#f00";
    })
    .finally(() => {
      // üîì volver a habilitar bot√≥n Paso 1
      if (btnAdmin) btnAdmin.disabled = false;
    });
}
</script>
</body>
</html>
